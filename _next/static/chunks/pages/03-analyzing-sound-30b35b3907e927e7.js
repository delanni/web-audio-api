(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[554],{1889:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/03-analyzing-sound",function(){return c(6510)}])},3116:function(d,b,a){"use strict";var e=a(5893);a(7294);var f=a(9604),g=a(1743);function c(a){var b=a.children,c=a.code,d=a.onCodeUpdate,h=a.className,i=a.language,j="string"==typeof b?b:c;return(0,e.jsxs)("div",{className:h,children:[(0,e.jsx)(f.ZP,{defaultLanguage:i,defaultValue:(0,g.Z)(j||"").trim(),theme:"vs-dark",onChange:d,options:{minimap:{enabled:!1}}}),";"]})}b.Z=c},8582:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5893),_CodeEditorHost__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3116),_styles_ModulePages_module_css__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(947),_styles_ModulePages_module_css__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_styles_ModulePages_module_css__WEBPACK_IMPORTED_MODULE_3__),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7294),APPLICATION_ROOT_ID="application-root";function EditorSplitView(a){var c=a.code,b=a.html,i=a.runCodeOnLoad,f=a.children,d=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(b),g=d[0],j=d[1],e=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(c),h=e[0],k=e[1];return(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(function(){i&&runCode(g,h)},[]),(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(function(){window.onkeydown=function(a){a.metaKey&&("s"===a.key||"S"===a.key)&&(a.preventDefault(),runCode(g,h))}},[g,h]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:_styles_ModulePages_module_css__WEBPACK_IMPORTED_MODULE_3___default().splitView,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:_styles_ModulePages_module_css__WEBPACK_IMPORTED_MODULE_3___default().splitViewLeft,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_CodeEditorHost__WEBPACK_IMPORTED_MODULE_1__.Z,{language:"html",code:b,className:_styles_ModulePages_module_css__WEBPACK_IMPORTED_MODULE_3___default().splitViewVertical,onCodeUpdate:function(a){return j(a||"")},children:b}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_CodeEditorHost__WEBPACK_IMPORTED_MODULE_1__.Z,{language:"typescript",className:_styles_ModulePages_module_css__WEBPACK_IMPORTED_MODULE_3___default().splitViewVertical,onCodeUpdate:function(a){return k(a||"")},children:c}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{className:_styles_ModulePages_module_css__WEBPACK_IMPORTED_MODULE_3___default().fullSizeButton,onClick:function(){return runCode(g,h)},children:"Run (\u2202\u222B\u2202)!"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{id:"split-view-controllers",className:_styles_ModulePages_module_css__WEBPACK_IMPORTED_MODULE_3___default().splitViewRight,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:_styles_ModulePages_module_css__WEBPACK_IMPORTED_MODULE_3___default().splitViewBaseContent,children:[f,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{children:"\xa0"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{id:APPLICATION_ROOT_ID})]})]})}function tryRunCleanup(){if(eval("typeof window.cleanup !== 'undefined'"))try{eval("try { window.cleanup() } catch (e) { console.error(e) }")}catch(e){console.error("Error while running cleanup code: ",window.cleanup,e)}}function runCode(htmlCode,javascriptCode){tryRunCleanup(),document.getElementById(APPLICATION_ROOT_ID).innerHTML=htmlCode;var cleanupSectionIndex=javascriptCode.split("\n").findIndex(function(a){return a.trim().includes("CLEANUP")}),runnableCode=javascriptCode.split("\n").slice(0,cleanupSectionIndex).join("\n"),cleanupJavascriptCode=javascriptCode.split("\n").slice(cleanupSectionIndex+1).join("\n"),cleanupHook="window.cleanup = () => {\n".concat(cleanupJavascriptCode,"\n    }"),script=runnableCode+"\n"+cleanupHook;eval(script)}__webpack_exports__.Z=EditorSplitView},6510:function(e,b,a){"use strict";a.r(b);var f=a(1438),g=a(8668),c=a(5892),h=a(1224),i=a(5893),j=a(8582),k=a(957),l=a(7294),m=a(8929),d=function(){var g='\n    <select id="analysis-kind">\n      <option value="time">Time / Waveform</option>\n      <option value="frequency">Frequency / FFT</option>\n    </select>\n    <canvas id="canvas" width="1024" height="400"></canvas>\n  ',h='\n    const audioCtx = new AudioContext();\n    const oscillator = audioCtx.createOscillator();\n    const filterNode = audioCtx.createBiquadFilter();\n    const gainNode = audioCtx.createGain();\n\n    const analyserNode = audioCtx.createAnalyser(); // create an analyser node\n    analyserNode.fftSize = 2 ** 12; // set the fft size to a power of 2, for visualisation\n\n    oscillator.connect(filterNode); // oscillator => filter\n    filterNode.connect(gainNode); // filter => gain\n    gainNode.connect(analyserNode); // gain => analyser\n    analyserNode.connect(audioCtx.destination); // analyser => speakers\n    \n    let analysisKind = "time";\n    document.getElementById("analysis-kind").addEventListener("change", (e) => {\n      analysisKind = e.target.value;\n    });\n    \n    // Send analysis data in a loop to a visualizer\n    let shouldDraw = true;\n    const drawLoop = () => {\n      if (!shouldDraw) return;\n      requestAnimationFrame(drawLoop);\n\n      const canvas = document.getElementById("canvas");\n      const canvasCtx = canvas.getContext("2d");\n      const e = new Event("draw-data");\n      \n      if (analysisKind === "frequency") {\n        // Frequency Domain\n        const bufferLength = analyserNode.frequencyBinCount;\n        const data = new Uint8Array(bufferLength);\n        analyserNode.getByteFrequencyData(data);\n        e.detail = { canvas, canvasCtx, data, kind: analysisKind };\n      } else {\n        // Time Domain\n        const bufferLength = analyserNode.frequencyBinCount;\n        const data = new Uint8Array(bufferLength);\n        analyserNode.getByteTimeDomainData(data);\n        e.detail = { canvas, canvasCtx, data, kind: analysisKind };\n      }\n\n      window.dispatchEvent(e);\n    }\n\n    // bind the dial updates from react to the audio nodes:\n    window.addEventListener("update-waveform", (e) => {\n      oscillator.type = e.detail;\n    });\n    window.addEventListener("update-frequency", (e) => {\n      oscillator.frequency.value = e.detail;\n    });\n    window.addEventListener("update-cutoff", (e) => {\n      filterNode.frequency.value = e.detail;\n    });\n    window.addEventListener("update-q", (e) => {\n      filterNode.Q.value = e.detail;\n    });\n    window.addEventListener("update-filter-kind", (e) => {\n      filterNode.type = e.detail;\n    });\n    window.addEventListener("update-gain", (e) => {\n      gainNode.gain.value = e.detail;\n    });\n\n    document.getElementById(\'btn\').onclick = () => {\n      oscillator.start();\n      drawLoop();\n    }\n\n    /* CLEANUP */\n    oscillator.stop();\n    audioCtx.close();\n    shouldDraw = false;\n  ',e=(0,k.Z)("sine",{onUpdate:o("update-waveform")}),f=(0,k.Z)("lowpass",{onUpdate:o("update-filter-kind")}),a=(0,k.Z)(440,{valueToInput:function(a){return Math.log10(a/2)},inputToValue:function(a){return Math.floor(2*Math.pow(10,a))},onUpdate:o("update-frequency")}),b=(0,k.Z)(2e4,{valueToInput:function(a){return Math.log10(a/2)},inputToValue:function(a){return Math.floor(2*Math.pow(10,a))},onUpdate:o("update-cutoff")}),c=(0,k.Z)(1,{onUpdate:o("update-q")}),d=(0,k.Z)(.2,{onUpdate:o("update-gain")});return(0,l.useEffect)(function(){window.addEventListener("draw-data",function(b){var a=b.detail,c=a.canvas,d=a.canvasCtx,e=a.data;"frequency"===b.detail.kind?(0,m.Z)(c,d,e):(0,m.Y)(c,d,e)})},[]),(0,i.jsxs)(j.Z,{code:h,html:g,runCodeOnLoad:!0,children:[(0,i.jsx)("div",{children:(0,i.jsxs)("select",{value:e.value,onChange:e.update,children:[(0,i.jsx)("option",{value:"sine",children:"Sine wave"}),(0,i.jsx)("option",{value:"sawtooth",children:"Sawtooth"}),(0,i.jsx)("option",{value:"square",children:"Square wave"}),(0,i.jsx)("option",{value:"triangle",children:"Triangle wave"})]})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{id:"freq-dial",type:"range",min:"1",max:"4",step:"0.001",value:a.inputValue,onChange:a.update}),"Output Frequency: ",a.value," Hz"]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{id:"cutoff-dial",type:"range",min:"0",max:"4",step:"0.001",value:b.inputValue,onChange:b.update}),"Cutoff Frequency: ",b.value," Hz"]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{id:"q-dial",type:"range",min:"0",max:"20",step:"0.01",value:c.inputValue,onChange:c.update}),"Q value: ",c.value]}),(0,i.jsx)("div",{children:(0,i.jsxs)("select",{value:f.value,onChange:f.update,children:[(0,i.jsx)("option",{value:"lowpass",children:"Lowpass"}),(0,i.jsx)("option",{value:"highpass",children:"Highpass"}),(0,i.jsx)("option",{value:"bandpass",children:"Bandpass"}),(0,i.jsx)("option",{value:"notch",children:"Notch"})]})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{id:"gain-dial",type:"range",min:"0",max:"3",step:"0.01",value:d.inputValue,onChange:d.update}),"Gain: ",Math.floor(100*d.value),"%"]}),(0,i.jsx)("button",{id:"btn",children:"Beep!"})]})},n=function(a){(0,g.Z)(b,a);var c=(0,h.Z)(b);function b(e,d){var a;return(0,f.Z)(this,b),(a=c.call(this,e)).value=d,a.detail=d,a}return b}((0,c.Z)(Event));function o(a){return function(b){var c=new n(a,b);window.dispatchEvent(c)}}b.default=d},957:function(c,b,a){"use strict";a.d(b,{Z:function(){return e}});var d=a(7294);function e(f){var a=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{},c=(0,d.useState)(f),b=c[0],g=c[1],h=a.inputToValue,e=a.valueToInput,i=a.onUpdate;return(0,d.useEffect)(function(){i&&i(b)}),{value:b,get inputValue(){if(e)return e(b);return b},update:function(c){var a=c.target.value;if("number"==typeof f){var b=h?h(Number(a)):Number(a);i&&i(b),g(b)}else{var d=h?h(a):a;i&&i(d),g(function(){return a})}}}}},8929:function(c,a,b){"use strict";function d(f,a,g){var c=f.width,d=f.height,h=g.length;a.fillStyle="rgb(200, 200, 200)",a.fillRect(0,0,c,d),a.lineWidth=2,a.strokeStyle="rgb(0, 0, 0)",a.beginPath();for(var j=1*c/h,e=0,b=0;b<h;b++){var i=g[b]/128*d/2;0===b?a.moveTo(e,i):a.lineTo(e,i),e+=j}a.lineTo(c,d/2),a.stroke()}function e(d,a,e){var f=d.width,b=d.height,g=e.length;a.fillStyle="rgb(20, 20, 20)",a.fillRect(0,0,f,b),a.fillStyle="rgb(200, 140, 140)";for(var h=1*f/g,i=0,c=0;c<g;c++){var j=Math.log10(e[c]/128*1e3)/Math.log10(100)*b;a.fillRect(i,b,h+1,b-j),i+=h}}b.d(a,{Y:function(){return d},Z:function(){return e}})},947:function(a){a.exports={splitView:"ModulePages_splitView__2k9eX",splitViewLeft:"ModulePages_splitViewLeft__KnnTd",splitViewRight:"ModulePages_splitViewRight__UKfJG",splitViewVertical:"ModulePages_splitViewVertical__uHpn6",splitViewBaseContent:"ModulePages_splitViewBaseContent__yEx7x",fullSizeButton:"ModulePages_fullSizeButton__HPwUm"}},1438:function(c,a,b){"use strict";function d(a,b){if(!(a instanceof b))throw TypeError("Cannot call a class as a function")}b.d(a,{Z:function(){return d}})},1224:function(c,b,a){"use strict";function d(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}a.d(b,{Z:function(){return i}});var e=a(2662);function f(a){if(void 0===a)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function g(a){return a&&a.constructor===Symbol?"symbol":typeof a}function h(b,a){return a&&("object"===g(a)||"function"==typeof a)?a:f(b)}function i(a){var b=d();return function(){var c,d=(0,e.Z)(a);if(b){var f=(0,e.Z)(this).constructor;c=Reflect.construct(d,arguments,f)}else c=d.apply(this,arguments);return h(this,c)}}},2662:function(c,a,b){"use strict";function d(a){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function e(a){return d(a)}b.d(a,{Z:function(){return e}})},8668:function(c,b,a){"use strict";a.d(b,{Z:function(){return e}});var d=a(4998);function e(b,a){if("function"!=typeof a&&null!==a)throw TypeError("Super expression must either be null or a function");b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),a&&(0,d.Z)(b,a)}},4998:function(c,a,b){"use strict";function d(a,b){return(d=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}function e(a,b){return d(a,b)}b.d(a,{Z:function(){return e}})},5892:function(c,b,a){"use strict";a.d(b,{Z:function(){return k}});var d=a(4998);function e(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}function f(a,b,c){return(f=e()?Reflect.construct:function(e,f,b){var a=[null];a.push.apply(a,f);var c=new(Function.bind.apply(e,a));return b&&(0,d.Z)(c,b.prototype),c}).apply(null,arguments)}function g(a,b,c){return f.apply(null,arguments)}function h(a){return -1!==Function.toString.call(a).indexOf("[native code]")}var i=a(2662);function j(a){var b="function"==typeof Map?new Map:void 0;return(j=function(a){if(null===a||!h(a))return a;if("function"!=typeof a)throw TypeError("Super expression must either be null or a function");if(void 0!==b){if(b.has(a))return b.get(a);b.set(a,c)}function c(){return g(a,arguments,(0,i.Z)(this).constructor)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),(0,d.Z)(c,a)})(a)}function k(a){return j(a)}}},function(a){var b=function(b){return a(a.s=b)};a.O(0,[551,774,888,179],function(){return b(1889)}),_N_E=a.O()}])