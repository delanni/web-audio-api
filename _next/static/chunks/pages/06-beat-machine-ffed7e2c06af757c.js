(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[809],{4993:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/06-beat-machine",function(){return c(6834)}])},3116:function(d,b,a){"use strict";var e=a(5893);a(7294);var f=a(9604),g=a(1743);function c(a){var b=a.children,c=a.code,d=a.onCodeUpdate,h=a.className,i=a.language,j="string"==typeof b?b:c;return(0,e.jsxs)("div",{className:h,children:[(0,e.jsx)(f.ZP,{defaultLanguage:i,defaultValue:(0,g.Z)(j||"").trim(),theme:"vs-dark",onChange:d,options:{minimap:{enabled:!1}}}),";"]})}b.Z=c},8582:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5893),_CodeEditorHost__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3116),_styles_ModulePages_module_css__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(947),_styles_ModulePages_module_css__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_styles_ModulePages_module_css__WEBPACK_IMPORTED_MODULE_3__),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7294),APPLICATION_ROOT_ID="application-root";function EditorSplitView(a){var c=a.code,b=a.html,i=a.runCodeOnLoad,f=a.children,d=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(b),g=d[0],j=d[1],e=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(c),h=e[0],k=e[1];return(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(function(){i&&runCode(g,h)},[]),(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(function(){window.onkeydown=function(a){a.metaKey&&("s"===a.key||"S"===a.key)&&(a.preventDefault(),runCode(g,h))}},[g,h]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:_styles_ModulePages_module_css__WEBPACK_IMPORTED_MODULE_3___default().splitView,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:_styles_ModulePages_module_css__WEBPACK_IMPORTED_MODULE_3___default().splitViewLeft,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_CodeEditorHost__WEBPACK_IMPORTED_MODULE_1__.Z,{language:"html",code:b,className:_styles_ModulePages_module_css__WEBPACK_IMPORTED_MODULE_3___default().splitViewVertical,onCodeUpdate:function(a){return j(a||"")},children:b}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_CodeEditorHost__WEBPACK_IMPORTED_MODULE_1__.Z,{language:"typescript",className:_styles_ModulePages_module_css__WEBPACK_IMPORTED_MODULE_3___default().splitViewVertical,onCodeUpdate:function(a){return k(a||"")},children:c}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{className:_styles_ModulePages_module_css__WEBPACK_IMPORTED_MODULE_3___default().fullSizeButton,onClick:function(){return runCode(g,h)},children:"Run (\u2202\u222B\u2202)!"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{id:"split-view-controllers",className:_styles_ModulePages_module_css__WEBPACK_IMPORTED_MODULE_3___default().splitViewRight,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:_styles_ModulePages_module_css__WEBPACK_IMPORTED_MODULE_3___default().splitViewBaseContent,children:[f,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{children:"\xa0"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{id:APPLICATION_ROOT_ID})]})]})}function tryRunCleanup(){if(eval("typeof window.cleanup !== 'undefined'"))try{eval("try { window.cleanup() } catch (e) { console.error(e) }")}catch(e){console.error("Error while running cleanup code: ",window.cleanup,e)}}function runCode(htmlCode,javascriptCode){tryRunCleanup(),document.getElementById(APPLICATION_ROOT_ID).innerHTML=htmlCode;var cleanupSectionIndex=javascriptCode.split("\n").findIndex(function(a){return a.trim().includes("CLEANUP")}),runnableCode=javascriptCode.split("\n").slice(0,cleanupSectionIndex).join("\n"),cleanupJavascriptCode=javascriptCode.split("\n").slice(cleanupSectionIndex+1).join("\n"),cleanupHook="window.cleanup = () => {\n".concat(cleanupJavascriptCode,"\n    }"),script=runnableCode+"\n"+cleanupHook;eval(script)}__webpack_exports__.Z=EditorSplitView},6834:function(e,b,a){"use strict";a.r(b);var f=a(1438),g=a(8668),c=a(5892),h=a(1224),i=a(5893),j=a(8582),k=a(957),d=function(){var p="\n  ",q='\n    const audioCtx = new AudioContext();\n\n    const synth1 = createTwoOscillatorDevice(audioCtx, {\n      octaveOffset: -2,\n      depan: 0.1,\n      detune: 10,\n      reverbWetness: 0.2\n    });\n\n    const synth2 = createTwoOscillatorDevice(audioCtx, {\n      octaveOffset: -1,\n      depan: 0.8,\n      oscillatorTypes: ["sine", "triangle"],\n      detune: 0,\n      reverbWetness: 0.4,\n      filterFreq: 10000,\n    });\n\n    const kickDrum = createDrumSynth(audioCtx, {\n      params: {\n        drumMix: 1.1,\n        noiseMix: 0\n      }\n    });\n\n    const snareDrum = createDrumSynth(audioCtx, {\n      params: {\n        drumMix: 0.4,\n        noiseMix: 0.2,\n        pitchMax: 300,\n        pitchMin: 30,\n        oscillatorType: "triangle"\n      }\n    });\n    const snareFilter = audioCtx.createBiquadFilter();\n    snareFilter.type = "highpass";\n    snareFilter.frequency.value = 700;\n    snareDrum.masterGain.connect(snareFilter);\n\n    const hiHat = createDrumSynth(audioCtx, {\n      params: {\n        drumMix: 0.1,\n        pitchRelease: 0.1,\n\n        noiseMix: 0.6,\n\n        gainRelease: 0.1,\n        oscillatorType: "sawtooth"\n      }\n    });\n    const hihatFilter = audioCtx.createBiquadFilter();\n    hihatFilter.type = "highpass";\n    hihatFilter.frequency.value = 8000;\n    hiHat.masterGain.connect(hihatFilter);\n\n    const compressor = audioCtx.createDynamicsCompressor();\n    compressor.threshold.setValueAtTime(-20, audioCtx.currentTime);\n    compressor.knee.setValueAtTime(10, audioCtx.currentTime);\n    compressor.ratio.setValueAtTime(6, audioCtx.currentTime);\n    compressor.attack.setValueAtTime(0, audioCtx.currentTime);\n    compressor.release.setValueAtTime(0.1, audioCtx.currentTime);\n\n    kickDrum.masterGain.connect(compressor);\n    snareFilter.connect(compressor);\n    hihatFilter.connect(compressor);\n\n    synth1.masterGain.connect(compressor);\n    synth2.masterGain.connect(compressor);\n\n    compressor.connect(audioCtx.destination);\n\n    const BPM = 130;\n\n    // Trigger one hit on the oscillator\n    document.getElementById(\'btn\').onclick = () => {\n      createPatternSequencer(BPM, [\n        "K", "", "H", "",\n        "KS", "", "H", "",\n        "K", "", "H", "H?",\n        "KS", "", "H", "",\n        "K", "", "H", "",\n        "KS", "", "H", "S?",\n        "K", "", "H", "H?",\n        "KS", "K?", "H", "*",\n      ], (count, value) => {\n        const time = audioCtx.currentTime;\n        if (value.indexOf("?") >= 0 && Math.random() > 0.5) return;\n\n        value.split("").forEach((symbol) => {\n          switch (symbol) {\n            case "K": {\n              kickDrum.triggerEnvelope(time);\n              break;\n            }\n            case "H": {\n              hiHat.triggerEnvelope(time, false);\n              break;\n            }\n            case "S": {\n              snareDrum.triggerEnvelope(time);\n              break;\n            }\n            case "*": {\n              if (Math.random() > 0.5) {\n                hihatFilter.frequency.value = hihatFilter.frequency.value - 500;\n              } else {\n                hihatFilter.frequency.value = hihatFilter.frequency.value + 500;\n              }\n            }\n          }\n        });\n      });\n\n      createPatternSequencer(BPM, [\n        3, 0, 0, 0,\n        // 3, 0, 0, 0,\n        // 3, 0, 0, 0,\n        // 1, 0, 1, 0,\n        //\n        // 3, 0, 0, 0,\n        // 3, 0, 0, 0,\n        // 3, 0, 0, 0,\n        // 1, 0, 1, 0,\n        //\n        // 3, 0, 0, 0,\n        // 3, 0, 0, 0,\n        // 3, 0, 0, 0,\n        // 1, 0, 1, 0,\n        //\n        // 3, 0, 0, 0,\n        // 3, 0, 0, 0,\n        // 6, 0, 0, 0,\n        // 0, 0, 0, 0,\n      ], (count, envLength) => {\n        const time = audioCtx.currentTime;\n        synth1.triggerEnvelope(time, "A", envLength);\n      });\n\n      const notes = ["A4", "C5", "A5", "D4", "F4"];\n\n      // const notes = ["A", "C", "D", "E", "F"];\n      let currentNoteIdx = 0;\n      createPatternSequencer(BPM, [\n        1, 0, 2, 0, 0, 0,\n        1, 0, 2, 0, 0, 0,\n        1, 0, 2, 0, 1, 0,\n        1, 0, 2, 0, 0, 0,\n        1, 0, 2, 0, 0, 0,\n        1, 0, 2, 0, 1, 1,\n      ], (count, envLength) => {\n        const time = audioCtx.currentTime;\n\n        synth2.triggerEnvelope(time, notes[currentNoteIdx % notes.length], envLength);\n\n        if (Math.random() > 0.1) {\n          currentNoteIdx++;\n        }\n      });\n\n      createLFO(0.1, audioCtx, 300, synth1.filterNode.frequency)\n    }\n\n    addEventListeners({\n      "update-synth1-level": synth1.masterGain.gain,\n      "update-synth1-cutoff": synth1.filterNode.frequency,\n      "update-synth1-q": synth1.filterNode.Q,\n      "update-synth2-level": synth2.masterGain.gain,\n      "update-synth2-cutoff": synth2.filterNode.frequency,\n      "update-synth2-depan": (v) => {\n        synth2.params.depan = v;\n        synth2.reconfigure();\n      },\n      "update-kickdrum-level": kickDrum.masterGain.gain,\n      "update-snaredrum-level": snareDrum.masterGain.gain,\n      "update-hihat-level": hiHat.masterGain.gain,\n      "update-hihat-cutoff": hihatFilter.frequency,\n      "update-hihat-release": v => {\n        hiHat.params.gainRelease = v;\n      }\n    });\n\n    /* CLEANUP */\n    audioCtx.close();\n  ',a=(0,k.Z)(600,{valueToInput:function(a){return Math.log10(a/2)},inputToValue:function(a){return Math.floor(2*Math.pow(10,a))},onUpdate:m("update-synth1-cutoff")}),b=(0,k.Z)(4,{onUpdate:m("update-synth1-q")}),c=(0,k.Z)(1,{onUpdate:m("update-synth1-level")}),d=(0,k.Z)(1e4,{valueToInput:function(a){return Math.log10(a/2)},inputToValue:function(a){return Math.floor(2*Math.pow(10,a))},onUpdate:m("update-synth2-cutoff")}),e=(0,k.Z)(.8,{onUpdate:m("update-synth2-depan")}),f=(0,k.Z)(1,{onUpdate:m("update-synth2-level")}),g=(0,k.Z)(1,{onUpdate:m("update-kickdrum-level")}),h=(0,k.Z)(1,{onUpdate:m("update-snaredrum-level")}),l=(0,k.Z)(1,{onUpdate:m("update-hihat-level")}),n=(0,k.Z)(.1,{onUpdate:m("update-hihat-release")}),o=(0,k.Z)(8e3,{valueToInput:function(a){return Math.log10(a/2)},inputToValue:function(a){return Math.floor(2*Math.pow(10,a))},onUpdate:m("update-hihat-cutoff")});return(0,i.jsxs)(j.Z,{code:q,html:p,runCodeOnLoad:!0,children:[(0,i.jsxs)("div",{className:"device",children:[(0,i.jsx)("header",{children:"Synth 1"}),(0,i.jsxs)("section",{children:[(0,i.jsxs)("div",{children:["Level: ",Math.floor(100*c.value),"%"]}),(0,i.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:c.inputValue,onChange:c.update})]}),(0,i.jsxs)("section",{children:[(0,i.jsxs)("div",{children:["Cutoff freq: ",a.value," Hz"]}),(0,i.jsx)("input",{type:"range",min:"0",max:"4",step:"0.001",value:a.inputValue,onChange:a.update})]}),(0,i.jsxs)("section",{children:[(0,i.jsxs)("div",{children:["Q value: ",b.value]}),(0,i.jsx)("input",{type:"range",min:"0",max:"50",step:"0.01",value:b.inputValue,onChange:b.update})]})]}),(0,i.jsxs)("div",{className:"device",children:[(0,i.jsx)("header",{children:"Synth 2"}),(0,i.jsxs)("section",{children:[(0,i.jsxs)("div",{children:["Level: ",Math.floor(100*f.value),"%"]}),(0,i.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:f.inputValue,onChange:f.update})]}),(0,i.jsxs)("section",{children:[(0,i.jsxs)("div",{children:["Cutoff freq: ",d.value," Hz"]}),(0,i.jsx)("input",{type:"range",min:"0",max:"4",step:"0.001",value:d.inputValue,onChange:d.update})]}),(0,i.jsxs)("section",{children:[(0,i.jsxs)("div",{children:["Depan: ",Math.floor(100*e.value)," %"]}),(0,i.jsx)("input",{type:"range",min:"-1",max:"1",step:"0.01",value:e.inputValue,onChange:e.update})]})]}),(0,i.jsxs)("div",{className:"device",children:[(0,i.jsx)("header",{children:"Drums"}),(0,i.jsxs)("section",{children:[(0,i.jsxs)("div",{children:["Kickdrum Level ",Math.floor(100*g.value)," %"]}),(0,i.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:g.inputValue,onChange:g.update})]}),(0,i.jsxs)("section",{children:[(0,i.jsxs)("div",{children:["Snaredrum Level ",Math.floor(100*h.value)," %"]}),(0,i.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:h.inputValue,onChange:h.update})]}),(0,i.jsxs)("section",{children:[(0,i.jsxs)("div",{children:["Hi-hat level ",Math.floor(100*l.value)," %"]}),(0,i.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:l.inputValue,onChange:l.update})]}),(0,i.jsxs)("section",{children:[(0,i.jsxs)("div",{children:["Hi-hat release: ",n.value.toPrecision(2)," seconds"]}),(0,i.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:n.inputValue,onChange:n.update})]}),(0,i.jsxs)("section",{children:[(0,i.jsxs)("div",{children:["Hihat filter: ",o.value," Hz"]}),(0,i.jsx)("input",{type:"range",min:"0",max:"4",step:"0.001",value:o.inputValue,onChange:o.update})]})]}),(0,i.jsx)("button",{id:"btn",children:"Start!"})]})},l=function(a){(0,g.Z)(b,a);var c=(0,h.Z)(b);function b(e,d){var a;return(0,f.Z)(this,b),(a=c.call(this,e)).value=d,a.detail=d,a}return b}((0,c.Z)(Event));function m(a){return function(b){var c=new l(a,b);window.dispatchEvent(c)}}b.default=d},957:function(c,b,a){"use strict";a.d(b,{Z:function(){return e}});var d=a(7294);function e(f){var a=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{},c=(0,d.useState)(f),b=c[0],g=c[1],h=a.inputToValue,e=a.valueToInput,i=a.onUpdate;return(0,d.useEffect)(function(){i&&i(b)}),{value:b,get inputValue(){if(e)return e(b);return b},update:function(c){var a=c.target.value;if("number"==typeof f){var b=h?h(Number(a)):Number(a);i&&i(b),g(b)}else{var d=h?h(a):a;i&&i(d),g(function(){return a})}}}}},947:function(a){a.exports={splitView:"ModulePages_splitView__2k9eX",splitViewLeft:"ModulePages_splitViewLeft__KnnTd",splitViewRight:"ModulePages_splitViewRight__UKfJG",splitViewVertical:"ModulePages_splitViewVertical__uHpn6",splitViewBaseContent:"ModulePages_splitViewBaseContent__yEx7x",fullSizeButton:"ModulePages_fullSizeButton__HPwUm"}},1438:function(c,a,b){"use strict";function d(a,b){if(!(a instanceof b))throw TypeError("Cannot call a class as a function")}b.d(a,{Z:function(){return d}})},1224:function(c,b,a){"use strict";function d(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}a.d(b,{Z:function(){return i}});var e=a(2662);function f(a){if(void 0===a)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function g(a){return a&&a.constructor===Symbol?"symbol":typeof a}function h(b,a){return a&&("object"===g(a)||"function"==typeof a)?a:f(b)}function i(a){var b=d();return function(){var c,d=(0,e.Z)(a);if(b){var f=(0,e.Z)(this).constructor;c=Reflect.construct(d,arguments,f)}else c=d.apply(this,arguments);return h(this,c)}}},2662:function(c,a,b){"use strict";function d(a){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function e(a){return d(a)}b.d(a,{Z:function(){return e}})},8668:function(c,b,a){"use strict";a.d(b,{Z:function(){return e}});var d=a(4998);function e(b,a){if("function"!=typeof a&&null!==a)throw TypeError("Super expression must either be null or a function");b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),a&&(0,d.Z)(b,a)}},4998:function(c,a,b){"use strict";function d(a,b){return(d=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}function e(a,b){return d(a,b)}b.d(a,{Z:function(){return e}})},5892:function(c,b,a){"use strict";a.d(b,{Z:function(){return k}});var d=a(4998);function e(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}function f(a,b,c){return(f=e()?Reflect.construct:function(e,f,b){var a=[null];a.push.apply(a,f);var c=new(Function.bind.apply(e,a));return b&&(0,d.Z)(c,b.prototype),c}).apply(null,arguments)}function g(a,b,c){return f.apply(null,arguments)}function h(a){return -1!==Function.toString.call(a).indexOf("[native code]")}var i=a(2662);function j(a){var b="function"==typeof Map?new Map:void 0;return(j=function(a){if(null===a||!h(a))return a;if("function"!=typeof a)throw TypeError("Super expression must either be null or a function");if(void 0!==b){if(b.has(a))return b.get(a);b.set(a,c)}function c(){return g(a,arguments,(0,i.Z)(this).constructor)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),(0,d.Z)(c,a)})(a)}function k(a){return j(a)}}},function(a){var b=function(b){return a(a.s=b)};a.O(0,[551,774,888,179],function(){return b(4993)}),_N_E=a.O()}])